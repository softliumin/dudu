<!DOCTYPE html>
<html xmlns:th=http://www.thymeleaf.org>
<head>
    <meta charset="UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="x-rim-auto-match" content="none">

    <title>嘟嘟闯关游戏</title>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="stylesheet" type="text/css" href="/static/css/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_505790_jfhfcf1fevq.css"/>


    <script src="//apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/js/style.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/js/mobile-util.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/js/global.js"></script>
    <script src="/static/js/layer.js"  type="text/javascript" ></script>
    <script src="/static/js/swipeSlide.min.js" type="text/javascript" charset="utf-8"></script>
    <link rel="shortcut icon" type="image/x-icon" href="/public/upload/logo/2019/02-19/f7fab1ff9dda5f5b41845b23fad3b986.png" media="screen"/>
</head>
<body class="pore_add">
<style>
    .body_bg{
        position: fixed;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: -1;
        background-image:url("//dudu001-1258827509.cos.ap-chengdu.myqcloud.com/login_back.png");
        background-size: 100% auto;
    }
</style>
<div class="body_bg"></div>

<div class="classreturn loginsignup ">
    <div class="content">
        <div class="ds-in-bl return [back]">
            <a id="[back]" href="/user/address_list">
                <i class="iconfont icon-jiantouzuo" style="[headerNewStyle]"></i>
            </a>
        </div>
        <div class="ds-in-bl search center">
            <span>编辑收货地址</span>
        </div>
        <div class="ds-in-bl menu hide">
            <a href="javascript:void(0);"><img src="/static/img/theme/class1.png" alt="菜单"></a>
        </div>
    </div>
</div>
<div class="flool up-tpnavf-wrap tpnavf [top-header]">
    <div class="footer up-tpnavf-head">
        <div class="up-tpnavf-i"> </div>
        <ul>

        </ul>
    </div>
</div>
<script type="text/javascript">

    $(function(){
        $(window).scroll(function() {
            if($(window).scrollTop() >= 1){
                $('.tpnavf').hide()
            }
        })
    })
</script>
<script src="/template/mobile/rainbow/static/js/jquery-3.1.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/template/mobile/rainbow/static/js/mobile-util.js" type="text/javascript" charset="utf-8"></script>
<script src="/template/mobile/rainbow/static/js/layer.js"  type="text/javascript" ></script>
<style type="text/css">
    .area_roll{
        width: 100%;
    }
    .myorder{
        margin: 0 .5rem;
    }
    .edit .myorder .order .fl input{
        background-color: transparent;
        font-size: .512rem;
    }
    .edit .myorder .order .fl span#area{
        font-size: .512rem;
    }
</style>
</head>
<body class="g4" style="position: relative;">
<div class="floor my p edit">
    <form action="/index.php/Mobile/User/edit_address.html" method="post" id="addressForm">
        <div class="content">
            <div class="floor list7">
                <div class="myorder p">
                    <div class="content30">
                        <a href="javascript:void(0)">
                            <div class="order">
                                <div class="fl">
                                    <span>收货人:</span>
                                </div>
                                <div class="fl">
                                    <input type="text" th:value="${address.name}" name="consignee"/>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="myorder p">
                    <div class="content30">
                        <a href="javascript:void(0)">
                            <div class="order">
                                <div class="fl">
                                    <span>手机号码：</span>
                                </div>
                                <div class="fl">
                                    <input type="text" th:value="${address.telNum}" name="mobile" />
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="myorder p">
                    <div class="content30">
                        <a href="javascript:void(0)" onclick="locationaddress(this);">
                            <div class="order">
                                <div class="fl">
                                    <span>省、市、区: </span>
                                    <span th:text="${address.mainAddress}"></span>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="myorder p">
                    <div class="content30">
                        <a href="javascript:void(0)">
                            <div class="order">
                                <div class="fl">
                                    <span>详细地址:</span>
                                </div>
                                <div class="fl">
                                    <input type="text" th:value="${address.detailAddress}" name="address"/>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>

            </div>
        </div>
</div>

<input type="hidden" name="id" value="31141" />
<input type="hidden" name="preurl" value="" />
<input type="hidden" name="type" value="" />

<div class="edita">
    <div class="content30">
        <div class="upgrade_btn">
            <a href="javascript:0;" onclick="checkForm()">保存该地址</a>
        </div>
    </div>
</div>
</form>
</div>
<!--选择地区-s-->
<div class="container" >
    <div class="city">
        <div class="screen_wi_loc">
            <div class="classreturn loginsignup">
                <div class="content">
                    <div class="ds-in-bl return seac_retu">
                        <a href="javascript:void(0);" onclick="closelocation();"><img src="/template/mobile/rainbow/static/images/return.png" alt="返回"></a>
                    </div>
                    <div class="ds-in-bl search center">
                        <span class="sx_jsxz">选择地区</span>
                    </div>
                    <div class="ds-in-bl suce_ok">
                        <a href="javascript:void(0);">&nbsp;</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="province-list"></div>
        <div class="city-list" style="display:none"></div>
        <div class="area-list" style="display:none"></div>
    </div>
</div>
<!--选择地区-e-->
<div class="ed_shdele">
    <div class="sfk">是否删除该地址?</div>
    <div class="lineq">
        <span class="clos">取消</span>
        <span class="sur"><a href="/index.php/Mobile/User/del_address/id/31141.html'">确定</a></span>
    </div>
</div>
<div class="mask-filter-div" style="display: none;"></div>
<script src="/public/js/global.js"></script>
<script src="/template/mobile/rainbow/static/js/mobile-location.js"></script>
<script type="text/javascript">
    $(function(){
        $('.turnoff').click(function(){
            $(this).toggleClass('turnup');
            $("input[name=is_default]").val(Number($(this).hasClass('turnup')));
        });
        $('.ed_shdele .clos').click(function(){
            $('.ed_shdele').hide();
            $('.mask-filter-div').hide();
        });
    });
    function btn_del(){
        $('.ed_shdele').show();
        $('.mask-filter-div').show();
    };

    function checkForm(){
        var consignee = $('input[name="consignee"]').val();
        var address = $('input[name="address"]').val();
        var mobile = $('input[name="mobile"]').val();
        var area = $('#area').text();
        var error = '';
        if(consignee == ''){
            error = '收货人不能为空 <br/>';
        }
        if(address == ''){
            error = '请填写地址 <br/>';
        }
        if(!checkMobile(mobile)){
            error = '手机号码格式有误 <br/>';
        }
        if(area == '') {
            error = '所在地区不能为空 <br/>';
        }
        if(error){
            layer.open({content:error,time:2});
            return false;
        }
        $.ajax({
            type : "POST",
            url:"/index.php/Mobile/User/edit_address.html",//+tab,
            dataType:'JSON',
            data :$('#addressForm').serialize(),
            success: function(data)
            {
                if(data.status == 1){
                    layer.open({content: data.msg,time:2,type:2,end:function () {
                            window.location.href=data.url;
                        }})
                }else{
                    layer.open({content: data.msg,time:2});
                }
            },
            error:function(){
                layer.open({content:'请稍候再试',time:2});
            }
        });
    }
    //黑色遮罩层-隐藏
    function undercover(){
        $('.mask-filter-div').hide();
    }
    //黑色遮罩层-显示
    function cover(){
        $('.mask-filter-div').show();
    }
    function locationaddress(e){
        $('.container').animate({width: '14.4rem', opacity: 'show'}, 'normal',function(){
            $('.container').show();
        });
        if(!$('.container').is(":hidden")){
            $('body').css('overflow','hidden')
            cover();
            $('.mask-filter-div').css('z-index','9999');
        }
    }
    function closelocation(){
        var province_div = $('.province-list');
        var city_div = $('.city-list');
        var area_div = $('.area-list');
        if(area_div.is(":hidden") == false){
            area_div.hide();
            city_div.show();
            province_div.hide();
            return;
        }
        if(city_div.is(":hidden") == false){
            area_div.hide();
            city_div.hide();
            province_div.show();
            return;
        }
        if(province_div.is(":hidden") == false){
            area_div.hide();
            city_div.hide();
            $('.container').animate({width: '0', opacity: 'show'}, 'normal',function(){
                $('.container').hide();
            });
            undercover();
            $('.mask-filter-div').css('z-index','inherit');
            return;
        }
    }
    //选择地址回调
    function select_area_callback(province_name , city_name , district_name , province_id , city_id , district_id){
        var area = province_name+' '+city_name+' '+district_name;
        $("#area").text(area);
        $("input[name=province]").val(getCookie('province_id'));
        $("input[name=city]").val(getCookie('city_id'));
        $("input[name=district]").val(getCookie('district_id'));
    }
</script>
</body>
</html>
