
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <!-- 去除自动识别电话号码 -->
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="x-rim-auto-match" content="none">

    <title>嘟嘟闯关游戏-帮助注册</title>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="stylesheet" type="text/css" href="/static/css/iconfont.css"/>
    <link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_505790_jfhfcf1fevq.css"/>

    <script src="http://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>

    <script src="/template/mobile/rainbow/static/js/style.js" type="text/javascript" charset="utf-8"></script>
    <script src="/template/mobile/rainbow/static/js/mobile-util.js" type="text/javascript" charset="utf-8"></script>
    <script src="/static/js/global.js"></script>
    <script src="/template/mobile/rainbow/static/js/layer.js"  type="text/javascript" ></script>
    <script src="/template/mobile/rainbow/static/js/swipeSlide.min.js" type="text/javascript" charset="utf-8"></script>

    <link rel="shortcut icon" type="image/x-icon" href="/static/img/theme/web_logo.png" media="screen"/>
</head>
<body class="g4">
<style>
    .body_bg{
        position: fixed;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: -1;
        background-image:url("//dudu001-1258827509.cos.ap-chengdu.myqcloud.com/login_back.png");
        background-size: 100% auto;
    }
</style>
<div class="body_bg"></div>

<div class="classreturn loginsignup ">
    <div class="content">
        <div class="ds-in-bl return [back]">
            <a id="[back]" href="javascript:history.back(-1)">
                <i class="iconfont icon-jiantouzuo" style="[headerNewStyle]"></i>
            </a>
        </div>
        <div class="ds-in-bl search center">
            <span>为他人注册</span>
        </div>
        <div class="ds-in-bl menu hide">
            <a href="javascript:void(0);"><img src="/static/img/theme/class1.png" alt="菜单"></a>
        </div>
    </div>
</div>
<div class="flool up-tpnavf-wrap tpnavf [top-header]">
    <div class="footer up-tpnavf-head">
        <div class="up-tpnavf-i"> </div>
        <ul>



        </ul>
    </div>
</div>
<script type="text/javascript">

    $(function(){
        $(window).scroll(function() {
            if($(window).scrollTop() >= 1){
                $('.tpnavf').hide()
            }
        })
    })
</script>

<link rel="stylesheet" href="/static/css/userInfo.css">
<style>
    .setting-list{
        margin:0  .5rem;
        width: auto;
    }
</style>
<form action="" method="post" id="regFrom">
    <ul class="setting-list">
        <li class="setting-item flex_panel">
            <input type="text" name="telNum" id="username" value="" placeholder="请输入要注册的手机号码" class="c-form-txt-normal main" maxlength="11"   onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')">
            <span id="mobile_phone_notice"></span>
        </li>

        <!--<li class="setting-item flex_panel">-->
            <!--<input class="v-code-input main" type="text" value="" name="verify_code" placeholder="请输入图文验证码">-->
            <!--<img class="btn-text-message v-code-pic" src="/index.php?m=Mobile&c=User&a=verify&type=user_reg" id="verify_code_img" onclick="verify()" onkeyup="this.value=this.value.replace(/\s+/g,'')">-->
        <!--</li>-->

        <li class="setting-item flex_panel">
            <input type="password" id="password" name="password" value="" maxlength="16" placeholder="请设置登录密码" class="c-form-txt-normal main" onkeyup="this.value=this.value.replace(/\s+/g,'')">
            <span id="password_notice"></span>
        </li>
        <li class="setting-item flex_panel">
            <input type="password" id="password2" name="password2" value="" maxlength="16" placeholder="请再次确认登录密码" class="c-form-txt-normal main" onkeyup="this.value=this.value.replace(/\s+/g,'')">
            <span id="confirm_password_notice"></span>
        </li>
        <li class="setting-item flex_panel">
            <input type="text" name="username" id="nickname" value="" placeholder="请输入昵称" class="c-form-txt-normal main" onkeyup="this.value=this.value.replace(/\s+/g,'')">
            <span id="nickname_notice"></span>
        </li>
        <li class="setting-item flex_panel">
            <input type="text"  name="weChat" value="" maxlength="16" placeholder="请填写微信号"  onkeyup="this.value=this.value.replace(/\s+/g,'')" class="main">
        </li>
        <li class="setting-item flex_panel">
            <input type="text"  name="aliPay" value="" maxlength="16" placeholder="请填写支付宝号" onkeyup="this.value=this.value.replace(/\s+/g,'')" class="main">
        </li>

    </ul>
</form>

<div class="lsu-submit">
    <input type="button" class="btn" id="" onclick="checkSubmit()" value="确认注册" />
</div>


<script>
    function verify() {
        $('#verify_code_img').attr('src', '/index.php?m=Mobile&c=User&a=verify&type=user_reg&r=' + Math.random());
    }

    function checkSubmit() {
        var formData = $("#regFrom").serializeArray().reverse();
        let error_msg = '';

        formData.forEach((v, k) => {
        //     if (v.value == '') {
        //     if(v.name == 'paytypeWx' || v.name == 'paytypeZfb'){
        //         //  选填
        //     }else{
        //         error_msg = $("input[name='" + v.name + "']").attr('placeholder');
        //     }
        // }

        switch (v.name) {
            case 'telNum':
                if (!checkMobile(v.value)) {
                    alert('请输入正确手机号');
                }
                break;
            case 'password2':
                if (v.value.length < 6) {
                    alert("密码不能小于6位");
                } else if (v.value != $("input[name='password']").val()) {
                    alert("两次输入密码不一致，请检查后重试");
                }
                break;
        }
    })

        $.ajax({
            url: '/user/ajax/helpRegister',
            data: $('#regFrom').serialize(),
            dataType: 'json',
            type: 'POST',
            success: function(res) {
                if (res.code==1){
                    alert("注册成功!");
                    window.location.href = '/user/home';
                } else{
                    alert(res.message);
                }
                console.log(res);
                // if (res.status == 1) {
                //     setTimeout(function() {
                //         window.location.href = '/index.php/Mobile/Index/index';
                //     }, 2000)
                // }
                //
                // layer.open({
                //     content: res.msg,
                //     time: 2000
                // })
            }
        })
    }
</script>
</body>

</html>